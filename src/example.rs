// Use reference instead of moving
let circuit = &self.global_circuit;
